@model Peacock.ViewModel.Manage.ExampleProductItem

<div class="form-group">
    <div class="col-md-10">
        <span>@Html.LabelFor(m => m.ProductName)</span>
        @Html.DropDownListFor(m => m.ProductId, Model.ProductSelectList, new { @class = "form-control" })
    </div>
</div>
<div class="form-group">
    <div class="col-md-10">
        <span>图片预览：</span>
        <img src="@Model.ProductImgPath" class="form-control j-img-preview" style="width:200px;height:200px;" />
    </div>
</div>
<div class="j-area-upload"></div>

@Html.HiddenFor(m => m.Id)
@Html.HiddenFor(m => m.ProductImgPath)
@Html.HiddenFor(m => m.ExampleId)

<script type="text/javascript">
    $(function () {
        let exampleImg = new exampleImgHelper();
        exampleImg.loadPage();
    });

    function exampleImgHelper() { };
    exampleImgHelper.prototype.imgList = [];
    exampleImgHelper.prototype.loadPage = function () {
        let self = this;

        self.imgList = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.ProductImgDict));

        $('#ProductId').on('change', function (v) {
            let selectValue = v.target.value;
            $('.j-img-preview').attr('src', self.imgList[selectValue]);
        });
    }   
</script>


